<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NonoSecret | Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ø³Ø±Ø§Ø± ğŸ”’</title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/noorabdelhalim77-rgb/NonoChat-/main/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6c5ce7; --bg: #0f0c29; --card: rgba(255, 255, 255, 0.08); --bright: 100%; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0; transition: 0.3s; filter: brightness(var(--bright)); overflow-x: hidden; width: 100vw; }
        .theme-green { --p: #2ecc71; --bg: #0a1f14; }
        .theme-gold { --p: #f1c40f; --bg: #1c1c1c; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ù„ÙˆØ¬Ùˆ */
        header { display: flex; align-items: center; justify-content: space-between; padding: 15px 20px; background: rgba(0,0,0,0.2); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 1000; }
        .logo-area { display: flex; align-items: center; gap: 10px; }
        .logo-img { width: 35px; height: 35px; border-radius: 8px; border: 1px solid var(--p); }

        /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© Ø§Ù„Ù…Ø¸Ø¨ÙˆØ·Ø© */
        .menu-btn { cursor: pointer; font-size: 24px; color: var(--p); }
        .side-menu { position: fixed; top: 0; right: -300px; width: 280px; height: 100%; background: #161625; z-index: 2000; transition: 0.4s; padding: 25px; box-sizing: border-box; box-shadow: -10px 0 30px rgba(0,0,0,0.5); }
        .side-menu.active { right: 0; }
        .overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.75); z-index:1500; backdrop-filter: blur(4px); }

        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª */
        .container { max-width: 500px; margin: 20px auto; padding: 0 15px; box-sizing: border-box; }
        .card { background: var(--card); backdrop-filter: blur(15px); border-radius: 25px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); margin-bottom: 20px; box-sizing: border-box; width: 100%; }
        
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border-radius: 12px; border: none; outline: none; background: #fff; color: #333; font-family: 'Cairo'; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border-radius: 12px; border: none; background: var(--p); color: white; font-weight: bold; cursor: pointer; transition: 0.2s; }
        button:active { transform: scale(0.98); }

        /* Ø§Ù„Ø§Ø¹ØªØ±Ø§ÙØ§Øª ÙˆØ§Ù„ØªÙØ§Ø¹Ù„Ø§Øª */
        .post { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 20px; margin-top: 15px; border-right: 5px solid var(--p); }
        .bin-text { color: #00ff41; font-family: monospace; background: #000; padding: 10px; border-radius: 10px; font-size: 12px; word-break: break-all; }
        .react-bar { display: flex; gap: 10px; margin-top: 12px; background: rgba(0,0,0,0.2); padding: 5px 12px; border-radius: 20px; width: fit-content; }
        .react-item { cursor: pointer; font-size: 16px; transition: 0.2s; }
        .react-item:hover { transform: scale(1.3); }

        /* Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
        .comments-area { margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px; font-size: 13px; }
        .comment { background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 10px; margin-bottom: 5px; }

        .footer { text-align: center; padding: 30px 10px; font-size: 12px; color: #888; border-top: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body id="mainBody">

    <header>
        <div class="logo-area">
            <img src="https://raw.githubusercontent.com/noorabdelhalim77-rgb/NonoChat-/main/logo.png" class="logo-img">
            <span style="font-weight: bold; font-size: 18px;">NonoSecret</span>
        </div>
        <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
    </header>

    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <div class="side-menu" id="sideMenu">
        <h3 style="border-bottom: 1px solid #333; padding-bottom: 10px;">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù†ÙˆÙ†Ùˆ âš™ï¸</h3>
        <label>Ø«ÙŠÙ… Ø§Ù„Ø£Ù„ÙˆØ§Ù†:</label>
        <div style="display:flex; gap:10px; margin:15px 0;">
            <div onclick="setTheme('default')" style="width:30px; height:30px; background:#6c5ce7; border-radius:8px; cursor:pointer;"></div>
            <div onclick="setTheme('green')" style="width:30px; height:30px; background:#2ecc71; border-radius:8px; cursor:pointer;"></div>
            <div onclick="setTheme('gold')" style="width:30px; height:30px; background:#f1c40f; border-radius:8px; cursor:pointer;"></div>
        </div>
        <label>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ø·ÙˆØ¹:</label>
        <input type="range" min="40" max="130" value="100" style="width:100%" oninput="setBright(this.value)">
        <hr style="opacity:0.1; margin:20px 0;">
        <button onclick="share()" style="background:#25d366">Ù†Ø´Ø± Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ“±</button>
    </div>

    <div class="container">
        <div class="card">
            <h3 id="targetTxt">Ø£Ø±Ø³Ù„ ØµØ±Ø§Ø­Ø© Ø³Ø±ÙŠØ© ğŸ”’</h3>
            <textarea id="sMsg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§.. Ù„Ù† ÙŠØ¹Ø±Ù Ø£Ø­Ø¯ Ù‡ÙˆÙŠØªÙƒ"></textarea>
            <button onclick="sendS()" style="background:#2ecc71;">Ø¥Ø±Ø³Ø§Ù„ ØµØ±Ø§Ø­Ø© ğŸš€</button>
        </div>

        <div class="card" id="inboxCard" style="display:none;">
            <h3>Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø£Ø³Ø±Ø§Ø± ğŸ“¥ <span onclick="openInbox()" style="cursor:pointer; float:left;">ğŸ‘ï¸</span></h3>
            <div id="inList" style="display:none; margin-top:15px;"></div>
        </div>

        <div class="card">
            <h3>Ø§Ù„Ø§Ø¹ØªØ±Ø§ÙØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø© âœ¨</h3>
            <textarea id="cTxt" placeholder="Ø¨Ù…Ø§Ø°Ø§ ØªØ¹ØªØ±Ù Ø§Ù„ÙŠÙˆÙ…ØŸ"></textarea>
            <div style="text-align:right; font-size:12px; margin-bottom:10px;">
                <label><input type="checkbox" id="isBin"> ØªØ´ÙÙŠØ± Ø¨Ø§ÙŠÙ†Ø±ÙŠ ğŸ”¢</label>
            </div>
            <button onclick="postC()">Ù†Ø´Ø± Ø§Ù„Ø§Ø¹ØªØ±Ø§Ù ğŸŒ</button>
            <div id="pList"></div>
        </div>

        <div class="card" id="regArea">
            <h3>Ø£Ù†Ø´Ø¦ ØµÙ†Ø¯ÙˆÙ‚Ùƒ Ø§Ù„Ø®Ø§Øµ âœ¨</h3>
            <input type="text" id="uN" placeholder="Ø§Ø³Ù…Ùƒ">
            <input type="password" id="uP" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
            <button onclick="reg()">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
            <div id="lBox" style="display:none; margin-top:15px; background:#fff; color:#333; padding:10px; border-radius:12px;">
                <span id="theL" style="font-size:10px; word-break:break-all;"></span>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026</p>
        <p>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… Ø¨ÙˆØ§Ø³Ø·Ø© <span style="color:var(--p); font-weight:bold;">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³Ø© Ù†ÙˆØ± ğŸ‘©â€ğŸ”§âš™ï¸</span></p>
        <p style="font-size:10px; opacity:0.6;">Mechatronics Engineering Student</p>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDFWvrDn9SVHga8KZEzgJomfzqwLXAwCdI",
            authDomain: "nonosecretchat.firebaseapp.com",
            projectId: "nonosecretchat",
            databaseURL: "https://nonosecretchat-default-rtdb.firebaseio.com/",
            appId: "1:829424619714:web:8069677332219804e3860d"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let u = new URLSearchParams(window.location.search).get('u');

        function toggleMenu() { document.getElementById('sideMenu').classList.toggle('active'); document.getElementById('overlay').style.display = (document.getElementById('sideMenu').classList.contains('active')) ? 'block' : 'none'; }
        function setTheme(t) { document.body.className = t === 'default' ? '' : 'theme-' + t; }
        function setBright(v) { document.documentElement.style.setProperty('--bright', v + '%'); }
        function toBin(t) { return t.split('').map(c => c.charCodeAt(0).toString(2).padStart(8,'0')).join(' '); }

        if(u) {
            db.ref('users/'+u+'/name').once('value', s => { if(s.exists()) document.getElementById('targetTxt').innerText = "ØµØ§Ø±Ø­ " + s.val(); });
            document.getElementById('inboxCard').style.display = 'block';
        }

        function sendS() {
            let m = document.getElementById('sMsg').value; if(!m) return;
            db.ref('users/'+u+'/saraha').push({ text: m, time: Date.now() });
            alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø³Ø±ÙŠØ©! ğŸ¤«"); document.getElementById('sMsg').value = "";
        }

        function openInbox() {
            let p = prompt("Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:");
            db.ref('users/'+u+'/pass').once('value', s => {
                if(s.val() === p) { document.getElementById('inList').style.display = 'block'; loadIn(); } else { alert("Ø®Ø·Ø£!"); }
            });
        }

        function loadIn() {
            db.ref('users/'+u+'/saraha').on('value', s => {
                let h = ""; s.forEach(m => { h = `<div class="comment">${m.val().text}</div>` + h; });
                document.getElementById('inList').innerHTML = h || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„";
            });
        }

        function postC() {
            let t = document.getElementById('cTxt').value; let bin = document.getElementById('isBin').checked;
            if(!t) return;
            db.ref('conf').push({ text: bin ? toBin(t) : t, isBin: bin, reacts: {}, comments: {}, time: Date.now() });
            document.getElementById('cTxt').value = "";
        }

        db.ref('conf').limitToLast(15).on('value', s => {
            let h = "";
            s.forEach(c => {
                let d = c.val(); let cid = c.key;
                let r = d.reacts || {};
                let coms = "";
                if(d.comments) Object.values(d.comments).forEach(cm => { coms += `<div class="comment"><b>Ù…Ø¬Ù‡ÙˆÙ„:</b> ${cm.t}</div>`; });

                h = `<div class="post">
                    <div class="${d.isBin ? 'bin-text' : ''}">${d.text}</div>
                    <div class="react-bar">
                        <span class="react-item" onclick="react('${cid}','h')">â¤ï¸ ${Object.values(r).filter(x=>x=='h').length}</span>
                        <span class="react-item" onclick="react('${cid}','f')">ğŸ”¥ ${Object.values(r).filter(x=>x=='f').length}</span>
                        <span class="react-item" onclick="react('${cid}','l')">ğŸ˜‚ ${Object.values(r).filter(x=>x=='l').length}</span>
                    </div>
                    <div class="comments-area">
                        <div id="cl-${cid}">${coms}</div>
                        <input type="text" id="ci-${cid}" placeholder="Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ø§Ù‹.." style="margin-bottom:0; font-size:11px; padding:8px;">
                        <button onclick="addCom('${cid}')" style="padding:5px; margin-top:5px; font-size:11px;">ØªØ¹Ù„ÙŠÙ‚</button>
                    </div>
                </div>` + h;
            });
            document.getElementById('pList').innerHTML = h;
        });

        function react(id, type) {
            let rid = localStorage.getItem('rid') || Math.random().toString(36).substr(2,9);
            localStorage.setItem('rid', rid);
            db.ref('conf/'+id+'/reacts/'+rid).set(type);
        }

        function addCom(id) {
            let t = document.getElementById('ci-'+id).value; if(!t) return;
            db.ref('conf/'+id+'/comments').push({ t: t });
            document.getElementById('ci-'+id).value = "";
        }

        function reg() {
            let n = document.getElementById('u
