<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NonoSecret | Ø¹Ø§Ù„Ù… Ø§Ù„Ø£Ø³Ø±Ø§Ø± ğŸ”’</title>
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/noorabdelhalim77-rgb/NonoChat-/main/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --p: #6c5ce7; --bg: #0f0c29; --card-bg: rgba(255, 255, 255, 0.08); }
        .theme-green { --p: #2ecc71; --bg: #0a1f14; }
        .theme-gold { --p: #f1c40f; --bg: #1c1c1c; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; text-align: center; padding: 20px; margin: 0; transition: 0.5s; overflow-x: hidden; }
        .menu-btn { position: fixed; top: 20px; right: 20px; font-size: 22px; cursor: pointer; z-index: 1001; background: var(--p); width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; border-radius: 12px; }
        .side-menu { position: fixed; top: 0; right: -280px; width: 260px; height: 100%; background: #1a1a2e; z-index: 1000; transition: 0.4s; padding: 25px; text-align: right; box-shadow: -5px 0 25px rgba(0,0,0,0.7); }
        .side-menu.active { right: 0; }
        .overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); z-index:999; backdrop-filter: blur(3px); }
        .card { background: var(--card-bg); backdrop-filter: blur(15px); border-radius: 25px; padding: 25px; max-width: 480px; margin: 20px auto; border: 1px solid rgba(255,255,255,0.1); }
        .post-card { border-radius: 20px; padding: 18px; margin-top: 20px; text-align: right; background: rgba(255,255,255,0.05); border-right: 5px solid var(--p); }
        .binary-box { background: #000; font-family: monospace; padding: 15px; border-radius: 12px; color: #00ff41; word-break: break-all; border: 1px solid #00ff41; text-shadow: 0 0 8px #00ff41; }
        input, textarea { width: 100%; padding: 14px; margin: 10px 0; border-radius: 15px; border: none; outline: none; background: white; color: #333; font-family: 'Cairo'; }
        button { width: 100%; padding: 14px; border-radius: 15px; border: none; background: var(--p); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .footer { margin-top: 40px; padding: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 14px; color: #ccc; }
        .eng-sub { display: block; font-size: 11px; color: var(--p); margin-top: 4px; }
    </style>
</head>
<body id="mainBody">

    <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <div class="side-menu" id="sideMenu">
        <h3>ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ… ğŸ¨</h3>
        <button onclick="changeTheme('default')" style="background:#6c5ce7; margin-bottom:5px;">Ø¨Ù†ÙØ³Ø¬ÙŠ</button>
        <button onclick="changeTheme('green')" style="background:#2ecc71; margin-bottom:5px;">Ø£Ø®Ø¶Ø±</button>
        <button onclick="changeTheme('gold')" style="background:#f1c40f; color:#333; margin-bottom:5px;">Ø°Ù‡Ø¨ÙŠ</button>
    </div>

    <div class="card">
        <h1>NonoSecret ğŸ”’</h1>
        
        <div id="sendArea" style="display:none; background:rgba(255,255,255,0.05); padding:15px; border-radius:15px; margin-bottom:20px;">
            <p id="targetName" style="color:var(--p); font-weight:bold;"></p>
            <textarea id="msgTxt" placeholder="Ø§ÙƒØªØ¨ ØµØ±Ø§Ø­ØªÙƒ Ø§Ù„Ø³Ø±ÙŠØ© Ù‡Ù†Ø§..."></textarea>
            <button onclick="sendMsg()" style="background:#2ecc71;">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø³Ø±ÙŠØ© ğŸš€</button>
        </div>

        <div id="inboxArea" style="display:none; background:rgba(255,255,255,0.05); padding:15px; border-radius:15px;">
            <h3>ØµÙ†Ø¯ÙˆÙ‚ Ø±Ø³Ø§Ø¦Ù„Ùƒ ğŸ“¥</h3>
            <div id="authBox">
                <input type="password" id="checkPass" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ù„ÙØªØ­ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„">
                <button onclick="unlockInbox()">ÙØªØ­ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚</button>
            </div>
            <div id="msgList" style="display:none; margin-top:15px; text-align:right;"></div>
        </div>

        <hr style="opacity:0.1; margin:20px 0;">

        <div id="setup">
            <h3>Ø£Ù†Ø´Ø¦ Ø±Ø§Ø¨Ø·Ùƒ Ø§Ù„Ø®Ø§Øµ âœ¨</h3>
            <input type="text" id="uName" placeholder="Ø§Ø³Ù…Ùƒ">
            <input type="password" id="uPass" placeholder="ÙƒÙ„Ù…Ø© Ø³Ø± Ù„Ù„ØµÙ†Ø¯ÙˆÙ‚">
            <button onclick="reg()">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø®Ø§Øµ Ø¨ÙŠ</button>
            <div id="linkBox" style="display:none; background:#fff; color:#333; padding:15px; border-radius:15px; margin-top:15px;">
                <span id="theLink" style="font-size:11px; word-break:break-all;"></span>
                <button onclick="copyLink()" style="background:#2d3436; margin-top:5px;">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ“‹</button>
            </div>
        </div>

        <div class="footer">
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026</p>
            <p>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… Ø¨ÙˆØ§Ø³Ø·Ø© <span style="color:var(--p); font-weight:bold;">Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³Ø© Ù†ÙˆØ± ğŸ‘©â€ğŸ”§âš™ï¸</span>
            <span class="eng-sub">Mechatronics Engineering Student</span></p>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDFWvrDn9SVHga8KZEzgJomfzqwLXAwCdI",
            authDomain: "nonosecretchat.firebaseapp.com",
            projectId: "nonosecretchat",
            databaseURL: "https://nonosecretchat-default-rtdb.firebaseio.com/",
            appId: "1:829424619714:web:8069677332219804e3860d"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let currentU = new URLSearchParams(window.location.search).get('u');

        function toggleMenu() { document.getElementById('sideMenu').classList.toggle('active'); document.getElementById('overlay').style.display = (document.getElementById('overlay').style.display === 'block') ? 'none' : 'block'; }
        function changeTheme(t) { document.body.className = (t === 'default') ? '' : 'theme-' + t; toggleMenu(); }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ Ø¨Ù€ ID ÙØ±ÙŠØ¯
        function reg() {
            let n = document.getElementById('uName').value;
            let p = document.getElementById('uPass').value;
            if(!n || !p) return alert('Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!');
            
            // ID ÙØ±ÙŠØ¯ Ø¬Ø¯Ø§Ù‹ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            let id = btoa(n + Math.random()).substring(0, 12).replace(/[/+=]/g, '0');
            
            db.ref('users/' + id).set({
                name: n,
                pass: p,
                createdAt: Date.now()
            }).then(() => {
                let link = window.location.origin + window.location.pathname + '?u=' + id;
                document.getElementById('theLink').innerText = link;
                document.getElementById('linkBox').style.display = 'block';
            });
        }

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù„ÙŠÙ†Ùƒ Ø§Ù„Ù…ÙØªÙˆØ­
        if(currentU) {
            document.getElementById('sendArea').style.display = 'block';
            document.getElementById('inboxArea').style.display = 'block';
            
            db.ref('users/' + currentU + '/name').once('value').then(s => {
                if(s.exists()) {
                    document.getElementById('targetName').innerText = "Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ø³Ø±ÙŠØ© Ù„Ù€ " + s.val();
                }
            });
        }

        function sendMsg() {
            let m = document.getElementById('msgTxt').value;
            if(!m) return alert('Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©!');
            db.ref('users/' + currentU + '/messages').push({
                text: m,
                time: Date.now()
            }).then(() => {
                alert('ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­! ğŸš€');
                document.getElementById('msgTxt').value = "";
            });
        }

        function unlockInbox() {
            let p = document.getElementById('checkPass').value;
            db.ref('users/' + currentU + '/pass').once('value').then(s => {
                if(s.val() === p) {
                    document.getElementById('authBox').style.display = 'none';
                    document.getElementById('msgList').style.display = 'block';
                    loadMessages();
                } else {
                    alert('Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ØºÙ„Ø·!');
                }
            });
        }

        function loadMessages() {
            db.ref('users/' + currentU + '/messages').on('value', s => {
                let h = "";
                s.forEach(m => {
                    h = `<div style="background:rgba(255,255,255,0.1); padding:10px; margin-bottom:5px; border-radius:10px;">${m.val().text}</div>` + h;
                });
                document.getElementById('msgList').innerHTML = h || "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø¹Ø¯";
            });
        }

        function copyLink() { navigator.clipboard.writeText(document.getElementById('theLink').innerText); alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®! ğŸ“‹'); }
    </script>
</body>
</html>
